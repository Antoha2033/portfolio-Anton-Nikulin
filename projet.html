<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="UTF-8" />
  <title>Projet -  Anton Nikulin</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Portfolio d’Anton Nikulin — projets web, jeux 2D/VR, et expériences interactives.">
  <link rel="stylesheet" href="css/projets.css" />

</head>

<body>
  <!-- Background video -->
  <video id="bg-video" autoplay muted loop playsinline>
    <source src="videos/Composition.mp4" type="video/mp4" />
  </video>



<main id="main" class="wrap">
  <div id="project-app">
    <!-- Loading / error -->
    <div v-if="loading" class="notice notice--muted">Chargement…</div>
    <div v-else-if="error" class="notice notice--danger" role="alert">{{ error }}</div>

    <!-- Project -->
    <article v-else class="project">
      <!-- Cover -->
      <header>
        <nav class="wrap header__bar">
          <a class="logo" href="index.html">Anton Nikulin</a>
          <nav class="nav__list">
            <a class="nav__link" href="#a-propos">À propos</a>
            <a class="nav__link" href="#pertinaces">Pertinaces</a>
            <a class="nav__link" href="#projects">Projets</a>
            <a class="nav__link" href="#contact">Contact</a>
          </nav>
    
        </nav>
      </header>

      <!-- Title + meta + excerpt -->
      <section class="project__info">
        <h1 class="project__title">{{ project.title }}</h1>

        <ul class="project__meta">
          <li v-for="(t,i) in (project.tags || [])" :key="i" class="chip">{{ t }}</li>
          <li v-if="project.year" class="chip chip--dim">{{ project.year }}</li>
        </ul>

        <p v-if="project.excerpt" class="project__excerpt">{{ project.excerpt }}</p>
      </section>

<!-- Alternating case-study slices (1 & 3 left, 2 right) -->
<section id="case-study" class="project-casestudy" v-if="project">
  <article
    v-for="(img, idx) in project.gallery.slice(0,3)"
    :key="'slice-'+idx"
    :class="['project-slice', (idx === 0 || idx === 2) ? 'left' : 'right']"
  >
    <!-- Slices 1 & 3: image LEFT, text RIGHT -->
    <template v-if="idx === 0 || idx === 2">
      <div class="media reveal-left">
        <img :src="img" :alt="project.title + ' ' + (idx+1)">
      </div>
      <div class="copy reveal-right">
        <h3 v-text="['Texte 1','Texte 2','Texte 3'][idx]"></h3>
        <p v-text="project['text' + (idx+1)]"></p>
      </div>
    </template>

    <!-- Slice 2: text LEFT, image RIGHT -->
    <template v-else>
      <div class="copy reveal-left">
        <h3>Texte 2</h3>
        <p v-text="project.text2"></p>
      </div>
      <div class="media reveal-right">
        <img :src="img" :alt="project.title + ' 2'">
      </div>
    </template>
  </article>
</section>


      
    </article>
  </div>
</main>



    <script defer src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>
    <script defer src="js/carousel.js"></script>
    <script defer src="js/projet.js"></script>

    <!-- (optional) chart libs you had -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation@3"></script>

    <script src="https://cdn.jsdelivr.net/npm/gsap@3/dist/gsap.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/gsap@3/dist/ScrollTrigger.min.js"></script>

<script>
  (() => {
    // Respect reduced motion
    if (window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches) return;
  
    function initScrollAnims() {
      if (!window.gsap || !window.ScrollTrigger) return;
      gsap.registerPlugin(ScrollTrigger);
  
      document.querySelectorAll('.project-slice').forEach((slice) => {
        const isLeft = slice.classList.contains('left');  // slices 1 & 3
        const media  = slice.querySelector('.media');
        const copy   = slice.querySelector('.copy');
        const dx     = isLeft ? -80 : 80;                 // image slides from its side
        const dxText = -dx;                               // text slides from opposite side
  
        if (media) {
          gsap.from(media, {
            x: dx,
            autoAlpha: 0,
            duration: 0.9,
            ease: 'power3.out',
            scrollTrigger: {
              trigger: slice,
              start: 'top 80%',
              toggleActions: 'play none none reverse'
            }
          });
        }
  
        if (copy) {
          gsap.from(copy, {
            x: dxText,
            autoAlpha: 0,
            duration: 0.9,
            ease: 'power3.out',
            delay: 0.1,
            scrollTrigger: {
              trigger: slice,
              start: 'top 80%',
              toggleActions: 'play none none reverse'
            }
          });
        }
      });
    }
  
    // Run when .project-slice elements exist (works even with Vue async render)
    const ready = () => document.querySelector('.project-slice');
    if (ready()) {
      initScrollAnims();
    } else {
      const obs = new MutationObserver(() => {
        if (ready()) { obs.disconnect(); initScrollAnims(); }
      });
      obs.observe(document.documentElement, { childList: true, subtree: true });
    }
  })();
  </script>
  

</body> 
</html>